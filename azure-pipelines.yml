---
trigger:
  - none

parameters:
  - name: environments
    type: object
    default: 

    - name: sbox
      group: HMI-APIM-BUILD-SBOX
    - name: test
      group: HMI-APIM-BUILD-TEST


variables:
  - group: HMI-APIM-Common

stages:
  - ${{ each environment in parameters.environments}}:

    - stage: ${{ environment.name }}
      
      jobs:

        - job: echo
          pool:
            vmImage: 'ubuntu-latest'
          variables:
          - group: ${{ environment.group }}
          steps:
            - script: echo Building ${{ environment.name }}...

