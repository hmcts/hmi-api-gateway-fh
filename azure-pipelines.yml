---
trigger:
  - none

parameters:
  - name: subscriptions
    type: object
    default: 

    - environment: sbox
      group: HMI-APIM-BUILD-SBOX
    - environment: test
      group: HMI-APIM-BUILD-TEST


variables:
  group: HMI-APIM-Common

stages:
  - ${{ each sub in parameters.subscriptions }}:

    - stage: ${{ sub.environment }}
      
      jobs:

        - job: echo
          pool:
            vmImage: 'ubuntu-latest'
          variables:
          - group: ${{ sub.group }}
            environment: ${{ sub.environment }}

          steps:
            - script: echo Building $(environment)

