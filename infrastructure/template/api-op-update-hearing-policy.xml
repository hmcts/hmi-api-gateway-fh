<policies>
	<inbound>
		<base />
		<choose>
			<when condition="@(context.Request.Headers.GetValueOrDefault("Destination-System" == "CFT")">
				<rewrite-uri template="/update-hearing/{hearing-id}" copy-unmatched-params="true" />
				<set-backend-service base-url="http://#{hostName}#/hearings/" />
			</when>
		</choose>
		<choose>
			<when condition="@(context.Request.Headers.GetValueOrDefault("Destination-System" == "S&L")">
				<rewrite-uri template="/update-hearing/{hearing-id}" copy-unmatched-params="true" />
				<set-backend-service base-url="http://#{hostName}#/hearings/" />
			</when>
		</choose>
		<choose>
			<when condition="@(context.Request.Headers.GetValueOrDefault("Destination-System" == "CRIME")">
				<rewrite-uri template="/update-hearing/{hearing-id}" copy-unmatched-params="true" />
				<set-backend-service base-url="http://#{hostName}#/hearings/" />
			</when>
		</choose>
		#{mockEndpoint}#
	</inbound>
	<backend>
		<base />
	</backend>
	<outbound>
		<base />
	</outbound>
	<on-error>
		<base />
	</on-error>
</policies>