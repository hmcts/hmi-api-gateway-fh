parameters:
  subscription: ''
  keyVaultName: ''
  secret: ''

steps:
- task: AzureKeyVault@1
  displayName: 'Export Secrets from KeyVault'
  inputs:
    azureSubscription: ${{ parameters.subscription }}
    keyVaultName: ${{ parameters.keyVaultName }}
    secretsFilter: ${{ parameters.secret }}
- script: |
    echo "##vso[task.setvariable variable=${{ parameters.secret }};isOutput=true;isSecret=true]$(hmi-apim-sub-key)"
  displayName: 'Export KeyVault Variables'
  name: exportKeyVaultSecret