parameters:
  keyVaultName: ''
  secret: ''

steps:
- task: AzureKeyVault@1
  displayName: 'Export Secrets from KeyVault'
  inputs:
    azureSubscription: $(subscription)
    keyVaultName: ${{ parameters.keyVaultName }}
    secretsFilter: ${{ parameters.secret }}
- script: |
    echo "##vso[task.setvariable variable=${{ parameters.secret }};isOutput=true]$(subscription_key)"
  displayName: 'Export KeyVault Variables'
  name: exportKeyVaultSecret