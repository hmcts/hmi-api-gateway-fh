parameters:
  - name: command
    type: string

  - name: sonarAnalysis
    type: boolean
    default: false

  - name: publishJUnitResults
    type: boolean
    default: true

steps:
  - task: Gradle@2
    displayName: Run gradle
    inputs:
      gradleWrapperFile: 'gradlew'
      sonarQubeGradlePluginVersion: 2.186.0
      workingDirectory: '$(System.DefaultWorkingDirectory)'
      tasks: ${{ parameters.command }}
      publishJUnitResults: ${{ parameters.publishJUnitResults }}
      testResultsFiles: '**/TEST-*.xml'
      javaHomeOption: 'JDKVersion'
      jdkVersionOption: '1.11'
      sonarQubeRunAnalysis: ${{ parameters.sonarAnalysis }}
