parameters:
  - name: registry
    type: string

  - name: repository
    type: string
  
  - name: tags
    type: string

  - name: volumes
    type: string

  - name: testUrl
    type: string
    
  - name: securityRules
    type: string

steps:
- task: Docker@1
  displayName: 'Run an image'
  inputs:
    containerregistrytype: 'Container Registry'
    dockerRegistryEndpoint: ${{ parameters.registry }}
    command: 'Run an image'
    imageName: ${{ parameters.repository }}:${{ parameters.tags }}
    volumes: ${{ parameters.volumes }}
    envVars: ${{ parameters.testUrl }} ${{ parameters.securityRules }}  
    containerCommand: '/bin/bash ./security.sh'
    runInBackground: false